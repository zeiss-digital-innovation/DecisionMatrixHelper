import{g as d}from"./QBtn.0dc1d4ca.js";import{Q as _}from"./QSpace.e0c7e4eb.js";import{Q as k}from"./QSeparator.0987fa92.js";import{Q as m}from"./QInput.5e73052c.js";import{Q as u,a as w,b as A}from"./QTable.3581d1de.js";import{Q as C}from"./QRating.dbf9ad27.js";import{q as U,p as q,E as b,r as B}from"./features.028c97ed.js";import{Q as F}from"./QList.3c83c0a6.js";import{u as j,r as V,v as p,x as g,y as n,z as a,b as D,a5 as E,F as S,a3 as I,a4 as T,C as c}from"./index.1022efcc.js";const M=j({__name:"AlternativesComponent",setup(z){const i=U(),r=q(),f=V(!1),v=V(["name","description","status","assessment"]),y=[{name:"name",align:"left",label:"Alternatives",field:"name",sortable:!0},{name:"description",align:"left",label:"Description (editable)",field:"description",sortable:!0},{name:"assessment",align:"left",label:"Features",field:o=>{var l;return(l=o.assessments.filter(e=>e.feature.id===o.id)[0])==null?void 0:l.justification},sortable:!0},{name:"delete",align:"left",label:"Delete",field:"delete",sortable:!1}];function h(){if(i.alternatives.length>0&&i.alternatives[i.alternatives.length-1].name==="new Alternative")return;let o=new Array(r.features.length);for(let l=0;l<r.features.length;l++)o[l]={id:b(),feature:r.features[l],justification:"justification "+l,score:0};i.addAlternative({id:b(),name:"Alternative "+i.alternatives.length,description:"new Alternative description",assessments:o,score:0})}function x(o){i.deleteAlternative(o)}function Q(){i.deleteAllAlternatives()}return(o,l)=>(p(),g(A,{flat:"",title:"Alternatives",rows:c(i).alternatives,columns:y,"rows-per-page-options":[10],"row-key":"id"},{top:n(()=>[a(d,{class:"q-ma-sm",color:"primary",icon:"add",label:"",onClick:h,"no-caps":""}),a(d,{class:"q-ma-sm",color:"secondary",icon:"delete",label:"",onClick:Q,"no-caps":""}),a(_),a(k,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:y,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(d,{class:"q-ml-md",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""})]),body:n(e=>[a(w,{props:e},{default:n(()=>[a(u,{key:"name",props:e,"auto-width":""},{default:n(()=>[a(m,{style:{"min-width":"128px"},label:"Name",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,type:"textarea",readonly:f.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(u,{key:"description",props:e},{default:n(()=>[a(m,{label:"Description",modelValue:e.row.description,"onUpdate:modelValue":t=>e.row.description=t,type:"textarea",readonly:f.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(u,{key:"assessment",props:e},{default:n(()=>[a(d,{size:"sm",color:"accent",round:"",dense:"",onClick:t=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1032,["props"]),a(u,{key:"delete",props:e,"auto-width":""},{default:n(()=>[a(d,{class:"q-ml-md",color:"secondary","icon-right":"delete","no-caps":"",onClick:t=>x(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"]),D(a(w,{props:e},{default:n(()=>[a(u,{colspan:"100%"},{default:n(()=>[(p(!0),S(T,null,I(e.row.assessments,t=>(p(),g(F,{dense:"",key:t.id},{default:n(()=>[a(B,{class:"justify-evenly"},{default:n(()=>[a(m,{modelValue:c(r).getFeatureById(t.feature.id).name,"onUpdate:modelValue":s=>c(r).getFeatureById(t.feature.id).name=s,"input-class":c(r).getFeatureById(t.feature.id).isExclusive?"text-warning":"",readonly:"",type:"text",borderless:""},null,8,["modelValue","onUpdate:modelValue","input-class"]),a(m,{style:{"min-width":"350px"},type:"textarea",modelValue:t.justification,"onUpdate:modelValue":s=>t.justification=s,autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:t.score,"onUpdate:modelValue":s=>t.score=s,size:"md",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["props"]),[[E,e.expand]])]),_:1},8,["rows"]))}});export{M as _};
