import{i as d,Q}from"./QBtn.d0083371.js";import{Q as _}from"./QSpace.f83058ac.js";import{Q as A,a as u,b as V,c as C}from"./QTable.f3124ad1.js";import{Q as m}from"./QInput.be3520fe.js";import{Q as U}from"./QRating.fa4fe228.js";import{k as B,j,v as b,Q as D}from"./features.9e7873c1.js";import{l as E}from"./QCheckbox.36480e4e.js";import{B as F,r as g,C as c,D as f,E as l,F as a,k as I,a5 as q,K as S,a3 as N,a4 as T,I as p,a8 as z,L}from"./index.dd4d0f4c.js";const W=F({__name:"AlternativesComponent",setup($){const r=B(),i=j(),v=g(!1),y=g(["name","description","status","assessment"]),w=[{name:"name",align:"left",label:"Alternatives",field:"name",sortable:!0},{name:"description",align:"left",label:"Description (editable)",field:"description",sortable:!0},{name:"assessment",align:"left",label:"Features",field:o=>{var n;return(n=o.assessments.filter(e=>e.feature.id===o.id)[0])==null?void 0:n.justification},sortable:!0},{name:"delete",align:"left",label:"Delete",field:"delete",sortable:!1}];function h(){if(r.alternatives.length>0&&r.alternatives[r.alternatives.length-1].name==="new Alternative")return;let o=new Array(i.features.length);for(let n=0;n<i.features.length;n++)o[n]={id:b(),feature:i.features[n],justification:"justification "+n,score:0};r.addAlternative({id:b(),name:"Alternative "+r.alternatives.length,description:"new Alternative description",assessments:o,score:0})}function k(o){r.deleteAlternative(o)}function x(){r.deleteAllAlternatives()}return(o,n)=>(c(),f(C,{flat:"",title:"Alternatives",rows:p(r).alternatives,columns:w,"rows-per-page-options":[10],"row-key":"id"},{top:l(()=>[a(d,{class:"q-ma-md",color:"primary",icon:"add",label:"",onClick:h,"no-caps":""}),a(d,{class:"q-ma-md",color:"primary",icon:"delete",label:"",onClick:x,"no-caps":""}),a(_),a(A,{modelValue:y.value,"onUpdate:modelValue":n[0]||(n[0]=e=>y.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:w,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(d,{class:"q-ml-md",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""})]),body:l(e=>[a(V,{props:e},{default:l(()=>[a(u,{key:"name",props:e,"auto-width":""},{default:l(()=>[a(m,{style:{"min-width":"128px"},label:"Name",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,type:"textarea",readonly:v.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(u,{key:"description",props:e},{default:l(()=>[a(m,{label:"Description",modelValue:e.row.description,"onUpdate:modelValue":t=>e.row.description=t,type:"textarea",readonly:v.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(u,{key:"assessment",props:e},{default:l(()=>[a(d,{size:"sm",color:"accent",round:"",dense:"",onClick:t=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1032,["props"]),a(u,{key:"delete",props:e,"auto-width":""},{default:l(()=>[a(d,{class:"q-ml-md",color:"secondary","icon-right":"delete","no-caps":"",onClick:t=>k(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"]),I(a(V,{props:e},{default:l(()=>[a(u,{colspan:"100%"},{default:l(()=>[(c(!0),S(T,null,N(e.row.assessments,t=>(c(),f(E,{dense:"",key:t.id},{default:l(()=>[a(D,{class:"justify-evenly"},{default:l(()=>[a(m,{modelValue:p(i).getFeatureById(t.feature.id).name,"onUpdate:modelValue":s=>p(i).getFeatureById(t.feature.id).name=s,class:z(p(i).getFeatureById(t.feature.id).isExclusive?"text-warning":"text-secondary"),type:"text",readonly:"",borderless:""},{append:l(()=>[t.feature.isExclusive?(c(),f(Q,{key:0,name:"warning",color:"secondary"})):L("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","class"]),a(m,{style:{"min-width":"350px"},type:"textarea",modelValue:t.justification,"onUpdate:modelValue":s=>t.justification=s,autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),a(U,{modelValue:t.score,"onUpdate:modelValue":s=>t.score=s,size:"md",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["props"]),[[q,e.expand]])]),_:1},8,["rows"]))}});export{W as _};
