import{Q as s,e as x}from"./QBtn.f1d511bb.js";import{Q}from"./QSpace.7dcdf012.js";import{a as _,b as d,e as w,f as A}from"./QTable.e9c69fb1.js";import{Q as u}from"./QInput.803f3553.js";import{Q as C}from"./QRating.63990ca6.js";import{c as U,a as q,v as V,Q as E}from"./alternative.1a0ba987.js";import{Q as D}from"./use-prevent-scroll.7ba5ec57.js";import{v as S,r as b,y as m,z as p,A as t,B as a,k as j,Z as B,W as z,X as N,Y as T,E as F,ad as I,a0 as $}from"./index.e0e0823a.js";const J=S({__name:"AlternativesComponent",setup(L){const r=U(),c=q(),f=b(!1),v=b(["name","description","status","assessment"]),y=[{name:"name",align:"left",label:"Alternatives",field:"name",sortable:!0},{name:"description",align:"left",label:"Description (editable)",field:"description",sortable:!0},{name:"assessment",align:"left",label:"Features",field:o=>{var n;return(n=o.assessments.filter(e=>e.feature.id===o.id)[0])==null?void 0:n.justification},sortable:!0},{name:"delete",align:"left",label:"Delete",field:"delete",sortable:!1}];function g(){if(r.alternatives.length>0&&r.alternatives[r.alternatives.length-1].name==="new Alternative")return;let o=new Array(c.features.length);for(let n=0;n<c.features.length;n++)o[n]={id:V(),feature:c.features[n],justification:"justification "+n,score:0};r.addAlternative({id:V(),name:"Alternative "+r.alternatives.length,description:"new Alternative description",assessments:o,score:0})}function h(o){r.deleteAlternative(o)}function k(){r.deleteAllAlternatives()}return(o,n)=>(m(),p(A,{flat:"",title:"Alternatives",rows:F(r).alternatives,columns:y,"rows-per-page-options":[10],"row-key":"id"},{top:t(()=>[a(s,{class:"q-ma-md",color:"primary",icon:"add",label:"",onClick:g,"no-caps":""}),a(s,{class:"q-ma-md",color:"primary",icon:"delete",label:"",onClick:k,"no-caps":""}),a(Q),a(_,{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=e=>v.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:y,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(s,{class:"q-ml-md",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""})]),body:t(e=>[a(w,{props:e},{default:t(()=>[a(d,{key:"name",props:e,"auto-width":""},{default:t(()=>[a(u,{style:{"min-width":"128px"},label:"Name",modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,type:"textarea",readonly:f.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(d,{key:"description",props:e},{default:t(()=>[a(u,{label:"Description",modelValue:e.row.description,"onUpdate:modelValue":l=>e.row.description=l,type:"textarea",readonly:f.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(d,{key:"assessment",props:e},{default:t(()=>[a(s,{size:"sm",color:"accent",round:"",dense:"",onClick:l=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1032,["props"]),a(d,{key:"delete",props:e,"auto-width":""},{default:t(()=>[a(s,{class:"q-ml-md",color:"secondary","icon-right":"delete","no-caps":"",onClick:l=>h(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"]),j(a(w,{props:e},{default:t(()=>[a(d,{colspan:"100%"},{default:t(()=>[(m(!0),z(T,null,N(e.row.assessments,l=>(m(),p(D,{dense:"",key:l.id},{default:t(()=>[a(E,null,{default:t(()=>[a(u,{modelValue:l.feature.name,"onUpdate:modelValue":i=>l.feature.name=i,class:I([l.feature.isExclusive?"text-red":"text-black","q-mr-lg q-pa-sm"]),type:"text",readonly:"",borderless:""},{append:t(()=>[l.feature.isExclusive?(m(),p(x,{key:0,name:"warning",color:"secondary"})):$("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","class"]),a(u,{style:{"min-width":"350px"},type:"textarea",modelValue:l.justification,"onUpdate:modelValue":i=>l.justification=i,autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),a(C,{modelValue:l.score,"onUpdate:modelValue":i=>l.score=i,size:"md",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["props"]),[[B,e.expand]])]),_:1},8,["rows"]))}});export{J as _};
