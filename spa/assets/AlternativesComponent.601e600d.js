import{Q as i,e as x}from"./QBtn.c410cca0.js";import{Q as C}from"./QSpace.d26b1657.js";import{a as U,b as d,e as b,f as q}from"./QTable.efc392cc.js";import{Q as u}from"./QInput.1508ffc7.js";import{Q as D}from"./QRating.1c65a963.js";import{c as E,a as N,v as h,Q as S}from"./alternative.bf901562.js";import{Q as j}from"./use-prevent-scroll.05cd7f82.js";import{v as B,r as m,y as c,z as y,A as n,B as a,k as T,Z as z,W as F,X as I,Y as $,E as L,a0 as R}from"./index.d9f54fa7.js";const K=B({__name:"AlternativesComponent",setup(M){const r=E(),f=N(),p=m(!1),v=m(""),g=m(!1);function k(t){return t.length<4||t.length>1e3?(p.value=!0,v.value="The Description must be between 4 and 1000 characters long!",!1):(p.value=!1,v.value="",!0)}const w=m(["name","description","status","assessment"]),V=[{name:"name",align:"left",label:"Alternatives",field:"name",sortable:!0},{name:"description",align:"left",label:"Description (editable)",field:"description",sortable:!0},{name:"assessment",align:"left",label:"Features",field:t=>{var o;return(o=t.assessments.filter(e=>e.feature.id===t.id)[0])==null?void 0:o.justification},sortable:!0},{name:"delete",align:"left",label:"Delete",field:"delete",sortable:!1}];function Q(){if(r.alternatives.length>0&&r.alternatives[r.alternatives.length-1].name==="new Alternative")return;let t=new Array(f.features.length);for(let o=0;o<f.features.length;o++)t[o]={id:h(),feature:f.features[o],justification:"justification "+o,score:0};r.addAlternative({id:h(),name:"Alternative "+r.alternatives.length,description:"new Alternative description",assessments:t,score:0})}function _(t){r.deleteAlternative(t)}function A(){r.deleteAllAlternatives()}return(t,o)=>(c(),y(q,{flat:"",title:"Alternatives",rows:L(r).alternatives,columns:V,"rows-per-page-options":[10],"row-key":"id"},{top:n(()=>[a(i,{class:"q-ma-md",color:"primary",icon:"add",label:"",onClick:Q,"no-caps":""}),a(i,{class:"q-ma-md",color:"primary",icon:"delete",label:"",onClick:A,"no-caps":""}),a(C),a(U,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=e=>w.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$q.lang.table.columns,"emit-value":"","map-options":"",options:V,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(i,{class:"q-ml-md",color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""})]),body:n(e=>[a(b,{props:e},{default:n(()=>[a(d,{key:"name",props:e,"auto-width":""},{default:n(()=>[a(u,{style:{"min-width":"128px"},label:"Name",modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,type:"textarea",readonly:g.value,autogrow:"",borderless:"",dense:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1032,["props"]),a(d,{key:"description",props:e},{default:n(()=>[a(u,{label:"Description",modelValue:e.row.description,"onUpdate:modelValue":l=>e.row.description=l,type:"textarea",readonly:g.value,autogrow:"",borderless:"",dense:"",validate:k,error:p.value,"error-message":v.value},null,8,["modelValue","onUpdate:modelValue","readonly","error","error-message"])]),_:2},1032,["props"]),a(d,{key:"assessment",props:e},{default:n(()=>[a(i,{size:"sm",color:"accent",round:"",dense:"",onClick:l=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1032,["props"]),a(d,{key:"delete",props:e,"auto-width":""},{default:n(()=>[a(i,{class:"q-ml-md",color:"secondary","icon-right":"delete","no-caps":"",onClick:l=>_(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"]),T(a(b,{props:e},{default:n(()=>[a(d,{colspan:"100%"},{default:n(()=>[(c(!0),F($,null,I(e.row.assessments,l=>(c(),y(j,{dense:"",key:l.id},{default:n(()=>[a(S,null,{default:n(()=>[a(u,{modelValue:l.feature.name,"onUpdate:modelValue":s=>l.feature.name=s,class:"q-mr-lg q-pa-sm",type:"text",readonly:"",borderless:""},{append:n(()=>[l.feature.isExclusive?(c(),y(x,{key:0,name:"warning",color:"secondary"})):R("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"]),a(u,{style:{"min-width":"350px"},type:"textarea",modelValue:l.justification,"onUpdate:modelValue":s=>l.justification=s,autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),a(D,{modelValue:l.score,"onUpdate:modelValue":s=>l.score=s,size:"md",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["props"]),[[z,e.expand]])]),_:1},8,["rows"]))}});export{K as _};
